<div class="row-wrapper">
  <div class="row-container p-4 bg-gray-800 rounded-lg shadow relative group"
       cdkDrag
       [cdkDragDisabled]="isResizing">
    <!-- Row header -->
    <div class="flex justify-between items-center mb-4">
      <div class="flex items-center gap-2">
        <button class="text-gray-400 hover:text-white"
                (click)="onEdit.emit()">
          <i class="fas fa-cog"></i>
        </button>
        <button class="text-gray-400 hover:text-white"
                (click)="onDelete.emit()">
          <i class="fas fa-trash"></i>
        </button>
      </div>
      <div class="text-gray-400">
        {{ row.height }}px
      </div>
    </div>

    <!-- Cards container -->
    <div class="cards-container"
         cdkDropList
         [id]="'row-' + row.id"
         [cdkDropListData]="row.cards"
         [cdkDropListConnectedTo]="['card-palette']"
         (cdkDropListDropped)="handleCardDrop($event)">
      <div class="flex gap-4 flex-wrap"
           [style.min-height.px]="row.height">
        <!-- Cards -->
        <ng-container *ngFor="let card of row.cards">
          <div class="card bg-gray-700 p-4 rounded"
               [style.flex]="'0 0 ' + (card.gridWidth / 12 * 100) + '%'"
               [style.max-width.%]="(card.gridWidth / 12 * 100)"
               cdkDrag
               [cdkDragData]="card">
            <div class="text-gray-200">{{ card.titles['fr'] || 'MENU.PAGES.LAYOUT.PLACEHOLDER_CARD' | translate }}</div>
          </div>
        </ng-container>

        <!-- Empty state / Drop zone -->
        <div *ngIf="row.cards.length === 0"
             class="w-full h-full flex items-center justify-center border-2 border-dashed border-gray-600 rounded">
          <span class="text-gray-400">{{ 'MENU.PAGES.LAYOUT.DROP_CARD_HERE' | translate }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Row resizer -->
  <app-row-resizer 
    [currentHeight]="row.height"
    (heightChange)="onHeightChange.emit({ rowId: row.id, height: $event })"
    (resizing)="isResizing = $event">
  </app-row-resizer>
</div> 