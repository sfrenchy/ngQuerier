<div class="p-6 h-full">
  <div *ngIf="isLoading" class="flex justify-center py-8">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
  </div>

  <div *ngIf="error" class="bg-red-500 text-white p-4 rounded mb-4">
    {{ error }}
  </div>

  <div *ngIf="layout" class="space-y-4 h-full">
    <!-- En-tête de la page -->
    <div class="flex items-center gap-4 mb-6">
      <i [class]="layout.icon + ' text-2xl text-gray-600'"></i>
      <h1 class="text-2xl font-semibold text-gray-800">
        {{ layout.names[userService.getCurrentLanguage()] || Object.values(layout.names)[0] }}
      </h1>
    </div>

    <!-- Contenu dynamique -->
    <div class="space-y-4 h-[calc(100%-4rem)]">
      <div *ngFor="let row of layout.rows" 
           class="flex gap-4 h-full" 
           [style.height.px]="row.height">
        <div *ngFor="let card of row.cards" 
             [style.width.%]="((card.gridwidth || 12) / 12) * 100"
             class="rounded-lg shadow-lg overflow-hidden flex flex-col h-full"
             [style.backgroundColor]="card.backgroundColor || '#1f2937'"
             [style.color]="card.textColor || '#ffffff'">
          <div *ngIf="card.configuration?.showHeader !== false" 
               class="p-4 border-b"
               [style.backgroundColor]="card.headerBackgroundColor || '#111827'"
               [style.color]="card.headerTextColor || '#ffffff'">
            <h3 class="text-lg font-medium">
              {{ card.titles[userService.getCurrentLanguage()] || Object.values(card.titles)[0] }}
            </h3>
          </div>
          <div class="p-4 flex-1 flex flex-col">
            <!-- Contenu de la carte -->
            <div [ngSwitch]="card.type" class="flex-1 flex items-center justify-center">
              <div *ngSwitchCase="'placeholder'" class="text-center">
                <p>{{ card.configuration?.centerLabel?.[userService.getCurrentLanguage()] || card.configuration?.centerLabel?.['fr'] }}</p>
              </div>
              <div *ngSwitchDefault>
                <p>Type de carte non supporté: {{ card.type }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 